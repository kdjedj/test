<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.teamproject.spring.teamgg.mapper.BoardMapper">

<!-- FreeBoard -->
	<select id="freeList" resultType="com.teamproject.spring.teamgg.vo.BoardVO">
		SELECT * FROM ${@com.teamproject.spring.teamgg.vo.BoardVO@TABLE_NAME_FREE}
		ORDER BY f_idx DESC LIMIT #{page},20
	</select>
	
	<select id="freeRead" resultType="com.teamproject.spring.teamgg.vo.BoardVO">
		select * from free_board where f_idx = #{f_idx}
	</select>	
	
	<delete id="freeDel">
		delete from free_board where f_idx = #{f_idx}
	</delete>
		
	<insert id="freeWrite" parameterType="com.teamproject.spring.teamgg.vo.BoardVO"
	useGeneratedKeys="true" keyProperty="writeIdx">
		insert into free_board(f_title, f_id, f_user, f_content, f_date)
    	values (#{f_title}, #{f_id}, #{f_user}, #{f_content}, now())
	</insert>		
	
	<update id="freeModify">
		update free_board
		set f_title = #{f_title},
			f_content = #{f_content}
		where f_idx = #{f_idx} and f_id = #{f_id}
	</update>
	
	<select id="getTotalCountFree" resultType="int">
		SELECT count(*) from ${@com.teamproject.spring.teamgg.vo.BoardVO@TABLE_NAME_FREE}
	</select>
	
<!-- 	TipBoard -->
	<select id="tipList" resultType="com.teamproject.spring.teamgg.vo.BoardVO">
		SELECT * FROM ${@com.teamproject.spring.teamgg.vo.BoardVO@TABLE_NAME_TIP}
		ORDER BY t_idx DESC LIMIT #{page},20
	</select>
	
	<select id="tipRead" resultType="com.teamproject.spring.teamgg.vo.BoardVO">
		select * from tip_board where t_idx = #{t_idx}
	</select>	
	
	<delete id="tipDel">
		delete from tip_board where t_idx = #{t_idx}
	</delete>
		
	<insert id="tipWrite" parameterType="com.teamproject.spring.teamgg.vo.BoardVO"
	useGeneratedKeys="true" keyProperty="writeIdx">
		insert into tip_board(t_title, t_id, t_user, t_content, t_date)
    	values (#{t_title}, #{t_id}, #{t_user}, #{t_content}, now())
	</insert>		
	
	<update id="tipModify">
		update tip_board
		set t_title = #{t_title},
			t_content = #{t_content}
		where t_idx = #{t_idx} and t_id = #{t_id}
	</update>
	
	<select id="getTotalCountTip" resultType="int">
		SELECT count(*) from ${@com.teamproject.spring.teamgg.vo.BoardVO@TABLE_NAME_TIP}
	</select>
	
	<!-- 	CompBoard -->
	<select id="compList" resultType="com.teamproject.spring.teamgg.vo.BoardVO">
		SELECT * FROM ${@com.teamproject.spring.teamgg.vo.BoardVO@TABLE_NAME_COMP}
		ORDER BY c_idx DESC LIMIT #{page},20
	</select>
	
	<select id="compRead" resultType="com.teamproject.spring.teamgg.vo.BoardVO">
		select * from comp_board where c_idx = #{c_idx}
	</select>	
	
	<delete id="compDel">
		delete from comp_board where c_idx = #{c_idx}
	</delete>
		
	<insert id="compWrite" parameterType="com.teamproject.spring.teamgg.vo.BoardVO"
	useGeneratedKeys="true" keyProperty="writeIdx">
		insert into comp_board(c_title, c_id, c_user, c_content, c_date)
    	values (#{c_title}, #{c_id}, #{c_user}, #{c_content}, now())
	</insert>		
	
	<update id="compModify">
		update comp_board
		set c_title = #{c_title},
			c_content = #{c_content}
		where c_idx = #{c_idx} and c_id = #{c_id}
	</update>
	
	<select id="getTotalCountComp" resultType="int">
		SELECT count(*) from ${@com.teamproject.spring.teamgg.vo.BoardVO@TABLE_NAME_COMP}
	</select>
</mapper>